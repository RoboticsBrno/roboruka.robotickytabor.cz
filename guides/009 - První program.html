<h3 id="první-program">První program</h3> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/demo_prog_00.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/demo_prog_00.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">1</p> <p>Stáhněte si <a href="https://github.com/RoboticsBrno/roboruka-examples/archive/stable.zip">ZIP se souborem příkladů pro Roboruku</a> a někam ho rozbalte tak, aby jste ho zase našli.</p> <div class="alert">Pozor: PlatformIO má chybu - nedokáže pracovat s diakritikou v cestě k projektu. <b>Všechny projetky musí být uloženy v cestě, kde nejsou háčky a čárky.</b><br/> Pokud vaše uživatelské jméno obsahuje diakritiku, tak nemůžete používat plochu ani složku dokumenty, ale musíte vytvořit například <i>C:\Roboruka\examples</i>.</div> <p><em>Pokud víte, co je to Git a umíte ho používat, můžete místo toho <a href="https://github.com/RoboticsBrno/roboruka-examples">naklonovat náš repozitář</a>.</em></p> </figcaption> </figure> </div> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_00.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_00.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">2</p> <p>Najděte si v rozbaleném obsahu složku <code class="highlighter-rouge">_PROJECT-TEMPLATE</code>. Toto je šablona, na které budeme stavět všechny programy pro Roboruku. Celou ji zkopírujte někam jinam a pojmenujte třeba <code class="highlighter-rouge">PrvniProgram</code>. Pamatujte si, kam jste ji zkopírovali.</p> </figcaption> </figure> </div> </div> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/demo_prog_01.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/demo_prog_01.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">3</p> <p>Ve <em>File</em> menu ve VSCode zvolte <em>Open Folder…</em> a otevřete složku <code class="highlighter-rouge">PrvniProgram</code>, kterou jste právě vykopírovali.</p> </figcaption> </figure> </div> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/demo_prog_02.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/demo_prog_02.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">4</p> <p>Po otevření projektu bude VSCode chvíli pracovat, počkejte, dokud text na dolním baru nezmizí.</p> </figcaption> </figure> </div> </div> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_01.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_01.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">5</p> <p>Otevřete soubor <code class="highlighter-rouge">src/main.cpp</code> a najděte funkci <code class="highlighter-rouge">void setup()</code>. Tato funkce je vykonána jednou, ihned po zapnutí robota. Musí v ní být volání <code class="highlighter-rouge">rkSetup();</code> s případnou konfigurací, toto volání pro vás správně nastaví všechny části Roboruky. <br/><br/> <em>Pokud znáte programování pro Arduino, tak metodu <code class="highlighter-rouge">setup()</code> znáte, u Roboruky funguje stejně jako s Arduinem.</em></p> </figcaption> </figure> </div> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_02.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_02.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">6</p> <p>Dovnitř metody <code class="highlighter-rouge">setup()</code>, pod volání <code class="highlighter-rouge">rkSetup(cfg);</code> přidáme náš kód. Rozsvítíme červenou a žlutou LED:<br/><br/> <code class="highlighter-rouge">rkLedRed(true);</code><br/> <code class="highlighter-rouge">rkLedYellow(true);</code></p> </figcaption> </figure> </div> </div> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_02a.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_02a.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">7</p> <p>Všimněte si, že při psaní vám VSCode napovídá. Stačí napsat <code class="highlighter-rouge">rk</code> a už uvidíte všechny metody, které můžete používat na ovládání Roboruky.</p> </figcaption> </figure> </div> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_02b.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_02b.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">8</p> <p>Když na nějakou metodu najedete myší, VSCode vám také ukáže, co daná metoda dělá. Všechny tyto informace <strong><a href="https://roboticsbrno.github.io/RB3201-RBControl-Roboruka-library/modules.html">najdete také v dokumentaci</a></strong>.</p> </figcaption> </figure> </div> </div> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_03.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_03.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">9</p> <p>Najděte si funkci <code class="highlighter-rouge">void loop()</code>. Tato funkce je volána pořád dokola, dokud je Roboruka zapnutá.</p> </figcaption> </figure> </div> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_04.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_04.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">10</p> <p>Uvnitř metody <code class="highlighter-rouge">loop()</code> dopíšeme kód, který zkontroluje, zda je tlačítko SW<strong>1</strong> stisknuté, a pokud ano, tak zhasne zelenou LED a rozsvítí modrou LED. V opačném případě rozsvítí zelenou LED a vypne modrou:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if (rkButtonIsPressed(1, false)) {
    rkLedGreen(false);
    rkLedBlue(true);
} else {
    rkLedGreen(true);
    rkLedBlue(false);
}
</code></pre></div></div> </figcaption> </figure> </div> </div> <div class="row"> <div class="col l6"> <figure class="figure"> <a data-fancybox="gallery" href="/img/guides/first_prog_05.png"> <img src="/img/empty.gif" data-echo="/thumb/img/guides/first_prog_05.png" alt="" class="responsive-img crisp"/> </a> <figcaption> <p class="step">11</p> <p>Kliknutím na šipku na dolním baru program zkompilujte a nahrajte do robota. Po nahrání začne svítit červená, žlutá a zelená LED. Po stisknutí tlačítka SW1 zelená zhasne a modrá se rozsvítí.</p> </figcaption> </figure> </div> </div> <p>V kódu jsme používali metody z knihovny pro Roboruku: <code class="highlighter-rouge">rkSetup()</code>, <code class="highlighter-rouge">rkLedRed()</code>….</p> <p><strong>Metody, které můžete používat, <a href="https://roboticsbrno.github.io/RB3201-RBControl-Roboruka-library/modules.html">naleznete v dokumentaci</a>.</strong></p>